import{d as O,u as T,a as F,o as s,c as l,b as e,f as R,v as H,x as K,F as p,r as b,h as C,t as o,i as L,j as V,e as M,B as i}from"./index.js";import{_ as X}from"./ModelSelector.vue_vue_type_script_setup_true_lang.js";import{_ as q}from"./_plugin-vue_export-helper.js";const J={class:"max-w-6xl mx-auto space-y-6"},Q={class:"flex items-center justify-between"},W={class:"card"},Y={class:"mb-6"},Z={class:"mb-6"},ee={class:"grid grid-cols-3 sm:grid-cols-6 gap-3"},te=["onClick"],ae={class:"text-2xl"},re={class:"text-xs mt-1"},se={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6"},le={class:"flex gap-3"},oe=["onClick"],de={class:"flex gap-3"},ne=["onClick"],ie=["disabled"],ce={key:0,class:"mt-4 p-4 bg-danger-50 dark:bg-danger-900/20 text-danger-600 dark:text-danger-400 rounded-lg"},ue={class:"card"},ve={class:"space-y-4"},ge={class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"},pe={class:"flex flex-wrap gap-2"},be=["onClick"],me={key:0,class:"card"},ye={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},xe={class:"aspect-video bg-gray-200 dark:bg-gray-700 flex items-center justify-center"},fe=["src"],ke={key:1,class:"text-center text-gray-400"},_e={class:"mt-2 text-sm"},he={class:"p-3"},we={class:"text-sm text-gray-700 dark:text-gray-300 line-clamp-2 mb-2"},Ce={class:"flex items-center justify-between text-xs text-gray-400"},Ve={class:"flex gap-2"},$e=["onClick"],Se=["onClick"],Ie=O({__name:"VideoGenView",setup(Ae){const m=T(),I=F(),c=i(""),u=i("product"),v=i(5),y=i("720p"),_=i(!1),n=i(""),h=[{value:"product",label:"商品展示",icon:"🛍️"},{value:"lifestyle",label:"生活场景",icon:"🏠"},{value:"promotional",label:"促销广告",icon:"📢"},{value:"tutorial",label:"使用教程",icon:"📚"},{value:"story",label:"品牌故事",icon:"📖"},{value:"creative",label:"创意短片",icon:"🎨"}],A=[{value:3,label:"3秒"},{value:5,label:"5秒"},{value:10,label:"10秒"}],U=[{value:"480p",label:"480p"},{value:"720p",label:"720p"},{value:"1080p",label:"1080p"}],j=[{category:"商品展示",prompts:["无线耳机产品展示，旋转展示，科技感背景","护肤品瓶身特写，自然光线，清新风格"]},{category:"生活场景",prompts:["咖啡机使用场景，温馨厨房，晨光氛围","运动鞋街头展示，动感十足，时尚风格"]},{category:"促销广告",prompts:["双11大促，红包雨动画，热情洋溢","新品上市，震撼登场，高级质感"]}],g=i([]),E=async()=>{var t,d;if(!m.isVideoEnabled){n.value="请先在设置页面配置视频生成模型的 API Key";return}if(!c.value.trim()){n.value="请输入视频描述";return}_.value=!0,n.value="";const r=c.value;let a=r;try{if(m.isTextEnabled){const w=await m.getTextService().chat([{role:"user",content:`请将以下商品视频描述优化为英文的 AI 视频生成提示词，要求：
1. 添加专业的视频拍摄关键词（如：cinematic, smooth camera movement, professional lighting）
2. 描述镜头运动和场景转换
3. 风格：${(t=h.find(G=>G.value===u.value))==null?void 0:t.label}
4. 时长：${v.value}秒
5. 控制在 80 词以内，直接输出英文提示词，不要解释

视频描述：${r}`}],"你是一位专业的视频导演和 AI 视频生成提示词专家。只输出优化后的英文提示词。");w.success&&w.content&&(a=w.content)}const f=await m.getVideoService().generateVideo(a);let k="",$="completed";f.success&&f.videoUrl?k=f.videoUrl:($="failed",n.value=f.error||"视频生成失败，请检查 API 配置");const N={id:`video-${Date.now()}`,prompt:r,style:u.value,duration:v.value,resolution:y.value,videoUrl:k,status:$,createdAt:Date.now()};g.value.unshift(N),k&&I.addContent({type:"short-video",platform:"other",title:r.slice(0,50)+(r.length>50?"...":""),content:`视频链接: ${k}

**描述**: ${r}

**风格**: ${(d=h.find(S=>S.value===u.value))==null?void 0:d.label}
**时长**: ${v.value}秒
**分辨率**: ${y.value}`,params:{prompt:r,optimizedPrompt:a,style:u.value,duration:String(v.value),resolution:y.value,videoUrl:k}}),c.value=""}catch(x){n.value=x instanceof Error?x.message:"视频生成失败"}finally{_.value=!1}},P=r=>{c.value=r},z=async r=>{try{window.open(r,"_blank")}catch{window.open(r,"_blank")}},B=r=>{const a=g.value.findIndex(t=>t.id===r);a>-1&&g.value.splice(a,1)},D=()=>{confirm("确定要清空所有生成历史吗？")&&(g.value=[])};return(r,a)=>(s(),l("div",J,[e("div",Q,[a[1]||(a[1]=e("h2",{class:"text-xl font-bold text-gray-800 dark:text-gray-200"}," AI 视频生成 ",-1)),R(X,{"model-type":"video","show-label":!0,size:"md"})]),e("div",W,[a[6]||(a[6]=e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-6"}," 视频描述与设置 ",-1)),e("div",Y,[a[2]||(a[2]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 视频描述 ",-1)),H(e("textarea",{"onUpdate:modelValue":a[0]||(a[0]=t=>c.value=t),rows:"3",placeholder:"描述你想要生成的视频内容，例如：一款无线耳机的产品展示视频，旋转展示产品细节，科技感背景...",class:"input"},null,512),[[K,c.value]])]),e("div",Z,[a[3]||(a[3]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 视频风格 ",-1)),e("div",ee,[(s(),l(p,null,b(h,t=>e("button",{key:t.value,class:C(["p-3 rounded-xl border-2 text-center transition-all",u.value===t.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 text-gray-600 dark:text-gray-400"]),onClick:d=>u.value=t.value},[e("span",ae,o(t.icon),1),e("div",re,o(t.label),1)],10,te)),64))])]),e("div",se,[e("div",null,[a[4]||(a[4]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 视频时长 ",-1)),e("div",le,[(s(),l(p,null,b(A,t=>e("button",{key:t.value,class:C(["flex-1 px-4 py-2 rounded-lg border-2 text-sm transition-all",v.value===t.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 hover:border-gray-300"]),onClick:d=>v.value=t.value},o(t.label),11,oe)),64))])]),e("div",null,[a[5]||(a[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 视频分辨率 ",-1)),e("div",de,[(s(),l(p,null,b(U,t=>e("button",{key:t.value,class:C(["flex-1 px-4 py-2 rounded-lg border-2 text-sm transition-all",y.value===t.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 hover:border-gray-300"]),onClick:d=>y.value=t.value},o(t.label),11,ne)),64))])])]),e("button",{disabled:_.value||!L(m).isVideoEnabled,class:"btn-primary w-full py-3",onClick:E},o(_.value?"🎬 生成中...":"🎬 生成视频"),9,ie),n.value?(s(),l("div",ce,o(n.value),1)):V("",!0)]),e("div",ue,[a[7]||(a[7]=e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4"}," 示例提示词 ",-1)),e("div",ve,[(s(),l(p,null,b(j,t=>e("div",{key:t.category},[e("h4",ge,o(t.category),1),e("div",pe,[(s(!0),l(p,null,b(t.prompts,(d,x)=>(s(),l("button",{key:x,class:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-gray-700 dark:text-gray-300",onClick:f=>P(d)},o(d),9,be))),128))])])),64))])]),g.value.length>0?(s(),l("div",me,[e("div",{class:"flex items-center justify-between mb-4"},[a[8]||(a[8]=e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200"}," 生成历史 ",-1)),e("button",{class:"text-sm text-danger-500 hover:text-danger-600",onClick:D}," 清空历史 ")]),e("div",ye,[(s(!0),l(p,null,b(g.value,t=>(s(),l("div",{key:t.id,class:"group relative rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-800"},[e("div",xe,[t.videoUrl&&t.status==="completed"?(s(),l("video",{key:0,src:t.videoUrl,class:"w-full h-full object-cover",controls:""},null,8,fe)):(s(),l("div",ke,[a[9]||(a[9]=e("span",{class:"text-4xl"},"🎬",-1)),e("p",_e,o(t.status==="failed"?"生成失败":"处理中..."),1)]))]),e("div",he,[e("p",we,o(t.prompt),1),e("div",Ce,[e("span",null,o(t.duration)+"秒 · "+o(t.resolution),1),e("div",Ve,[t.videoUrl?(s(),l("button",{key:0,class:"text-primary-500 hover:text-primary-600",onClick:d=>z(t.videoUrl)}," 下载 ",8,$e)):V("",!0),e("button",{class:"text-danger-500 hover:text-danger-600",onClick:d=>B(t.id)}," 删除 ",8,Se)])])])]))),128))])])):V("",!0),a[10]||(a[10]=M('<div class="card bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800" data-v-e60ef9b3><h3 class="text-lg font-semibold text-purple-800 dark:text-purple-300 mb-3" data-v-e60ef9b3> 📖 使用说明 </h3><div class="text-sm text-purple-700 dark:text-purple-400 space-y-2" data-v-e60ef9b3><p data-v-e60ef9b3>1. <strong data-v-e60ef9b3>描述视频</strong>：详细描述你想要生成的视频内容，包括场景、动作、风格</p><p data-v-e60ef9b3>2. <strong data-v-e60ef9b3>选择风格</strong>：根据用途选择合适的视频风格</p><p data-v-e60ef9b3>3. <strong data-v-e60ef9b3>设置参数</strong>：选择视频时长和分辨率</p><p data-v-e60ef9b3>4. <strong data-v-e60ef9b3>生成视频</strong>：AI 会自动优化提示词并生成视频</p></div><div class="mt-4 p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg text-sm text-purple-700 dark:text-purple-400" data-v-e60ef9b3> 💡 <strong data-v-e60ef9b3>提示</strong>：视频生成需要较长时间（通常 30 秒到 2 分钟），请耐心等待。目前支持智谱 CogVideoX 和通义万相视频模型。 </div></div>',1))]))}}),Pe=q(Ie,[["__scopeId","data-v-e60ef9b3"]]);export{Pe as default};
