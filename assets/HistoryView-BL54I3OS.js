import{H as Z,j as q,$ as v,p as G,l as o,d as n,a,x as U,J as K,i as P,b as F,D as T,T as d,t as D,f as u,A as w,M as Q}from"./index-6PeRYcw-.js";import{s as W}from"./_plugin-vue_export-helper-lGy7RumW.js";const Y={class:"max-w-6xl mx-auto space-y-6"},ee={class:"card"},te={class:"flex flex-wrap items-center gap-4"},ae={class:"flex-1 min-w-[200px]"},le=["value"],re={class:"flex items-center gap-2 cursor-pointer"},se={class:"flex gap-2"},oe={key:2,class:"relative group"},ne={class:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 hidden group-hover:block z-10"},ie={class:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400"},ce={key:0,class:"space-y-4"},de={class:"card py-3"},ue={class:"flex items-center gap-3 cursor-pointer"},ge={class:"flex items-start gap-4"},pe=["checked","onChange"],ve={class:"flex-1 min-w-0"},xe={class:"flex items-center gap-2 mb-2"},ye={class:"px-2 py-0.5 bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 text-xs rounded"},be={class:"text-xs text-gray-500 dark:text-gray-400"},me={key:0,class:"text-yellow-500"},ke={key:1,class:"px-2 py-0.5 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 text-xs rounded"},fe={key:2,class:"px-2 py-0.5 bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 text-xs rounded"},he={class:"font-medium text-gray-800 dark:text-gray-200 mb-2"},we={key:0,class:"mb-3"},Ce=["src","alt","onClick"],$e={key:1,class:"mb-3"},je=["src"],Ue={class:"text-sm text-gray-500 dark:text-gray-400 line-clamp-3 whitespace-pre-wrap"},Le={class:"flex flex-col gap-2"},ze=["title","onClick"],Se=["onClick"],Oe={class:"relative group"},Re={class:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 hidden group-hover:block z-10"},Ae=["onClick"],Fe=["onClick"],Te=["onClick"],De={key:1,class:"card text-center py-12"},Ve={class:"mt-4 text-gray-500 dark:text-gray-400"},Ee=["src"],Je=Z({__name:"HistoryView",setup(Be){const i=q(),b=v(""),m=v("all"),C=v(!1),r=v(new Set),k=v(!1),f={"product-title":"å•†å“æ ‡é¢˜","product-desc":"å•†å“æè¿°","short-video":"çŸ­è§†é¢‘è„šæœ¬","live-script":"ç›´æ’­è¯æœ¯","marketing-copy":"è¥é”€æ–‡æ¡ˆ","customer-service":"å®¢æœè¯æœ¯","social-media":"ç¤¾åª’æ–‡æ¡ˆ"},S=l=>{var t;return!!((t=l.params)!=null&&t.imageUrl)},O=l=>{var t;return!!((t=l.params)!=null&&t.videoUrl)},L=v(!1),$=v(""),V=l=>{$.value=l,L.value=!0},R=()=>{L.value=!1,$.value=""},x=G(()=>{let l=[...i.contents];if(b.value){const t=b.value.toLowerCase();l=l.filter(e=>e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t))}return m.value!=="all"&&(l=l.filter(t=>t.type===m.value)),C.value&&(l=l.filter(t=>i.isFavorite(t.id))),l.sort((t,e)=>e.createdAt-t.createdAt)}),E=()=>{k.value?r.value=new Set(x.value.map(l=>l.id)):r.value=new Set},J=l=>{r.value.has(l)?r.value.delete(l):r.value.add(l),k.value=r.value.size===x.value.length},B=()=>{r.value.size!==0&&confirm(`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${r.value.size} æ¡è®°å½•å—ï¼Ÿ`)&&(r.value.forEach(l=>{i.deleteContent(l)}),r.value=new Set,k.value=!1)},N=()=>{r.value.size!==0&&r.value.forEach(l=>{i.isFavorite(l)||i.toggleFavorite(l)})},z=l=>{if(r.value.size===0)return;const t=x.value.filter(c=>r.value.has(c.id));let e="",s="",g="";if(l==="txt")e=t.map(c=>`ã€${f[c.type]}ã€‘${c.title}
${"=".repeat(40)}
${c.content}
`).join(`

`),s=`ç”µå•†å†›å¸ˆ-å¯¼å‡º-${Date.now()}.txt`,g="text/plain";else if(l==="json")e=JSON.stringify(t,null,2),s=`ç”µå•†å†›å¸ˆ-å¯¼å‡º-${Date.now()}.json`,g="application/json";else{const c=["ç±»åž‹","æ ‡é¢˜","å†…å®¹","å¹³å°","åˆ›å»ºæ—¶é—´"],X=t.map(p=>[f[p.type],p.title,`"${p.content.replace(/"/g,'""')}"`,p.platform,new Date(p.createdAt).toLocaleString()]);e=[c.join(","),...X.map(p=>p.join(","))].join(`
`),s=`ç”µå•†å†›å¸ˆ-å¯¼å‡º-${Date.now()}.csv`,g="text/csv"}const h=new Blob([e],{type:g}),j=URL.createObjectURL(h),y=document.createElement("a");y.href=j,y.download=s,y.click(),URL.revokeObjectURL(j)},A=(l,t)=>{const e=i.getContentById(l);if(!e)return;let s="",g="",h="";t==="txt"?(s=`ã€${f[e.type]}ã€‘${e.title}
${"=".repeat(40)}
${e.content}`,g=`${e.title}.txt`,h="text/plain"):(s=JSON.stringify(e,null,2),g=`${e.title}.json`,h="application/json");const j=new Blob([s],{type:h}),y=URL.createObjectURL(j),c=document.createElement("a");c.href=y,c.download=g,c.click(),URL.revokeObjectURL(y)},_=async l=>{try{await navigator.clipboard.writeText(l),alert("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch{alert("å¤åˆ¶å¤±è´¥")}},H=l=>{confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ")&&i.deleteContent(l)},I=l=>new Date(l).toLocaleString(),M=()=>{confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰åŽ†å²è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼")&&i.clearAll()};return(l,t)=>(o(),n("div",null,[a("div",Y,[a("div",ee,[a("div",te,[a("div",ae,[U(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e),type:"text",placeholder:"æœç´¢æ ‡é¢˜æˆ–å†…å®¹...",class:"input"},null,512),[[K,b.value]])]),U(a("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>m.value=e),class:"input w-auto"},[t[8]||(t[8]=a("option",{value:"all"}," å…¨éƒ¨ç±»åž‹ ",-1)),(o(),n(F,null,T(f,(e,s)=>a("option",{key:s,value:s},d(e),9,le)),64))],512),[[P,m.value]]),a("label",re,[U(a("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>C.value=e),type:"checkbox",class:"rounded"},null,512),[[D,C.value]]),t[9]||(t[9]=a("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"åªçœ‹æ”¶è—",-1))]),a("div",se,[r.value.size>0?(o(),n("button",{key:0,class:"btn bg-danger-500 text-white hover:bg-danger-600 text-sm",onClick:B}," ðŸ—‘ï¸ åˆ é™¤ ("+d(r.value.size)+") ",1)):u("",!0),r.value.size>0?(o(),n("button",{key:1,class:"btn-secondary text-sm",onClick:N}," â­ æ‰¹é‡æ”¶è— ")):u("",!0),r.value.size>0?(o(),n("div",oe,[t[10]||(t[10]=a("button",{class:"btn-secondary text-sm"}," ðŸ“¥ å¯¼å‡º ",-1)),a("div",ne,[a("button",{class:"block w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:bg-gray-700",onClick:t[3]||(t[3]=e=>z("txt"))}," TXT æ ¼å¼ "),a("button",{class:"block w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:bg-gray-700",onClick:t[4]||(t[4]=e=>z("json"))}," JSON æ ¼å¼ "),a("button",{class:"block w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:bg-gray-700",onClick:t[5]||(t[5]=e=>z("csv"))}," CSV æ ¼å¼ ")])])):u("",!0)])])]),a("div",ie,[a("span",null,"å…± "+d(x.value.length)+" æ¡è®°å½•",1),w(i).contents.length>0?(o(),n("button",{key:0,class:"text-danger-500 hover:text-danger-600",onClick:M}," æ¸…ç©ºå…¨éƒ¨ ")):u("",!0)]),x.value.length>0?(o(),n("div",ce,[a("div",de,[a("label",ue,[U(a("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>k.value=e),type:"checkbox",class:"rounded",onChange:E},null,544),[[D,k.value]]),t[11]||(t[11]=a("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"å…¨é€‰",-1))])]),(o(!0),n(F,null,T(x.value,e=>(o(),n("div",{key:e.id,class:"card hover:shadow-md transition-shadow"},[a("div",ge,[a("input",{checked:r.value.has(e.id),type:"checkbox",class:"rounded mt-1",onChange:s=>J(e.id)},null,40,pe),a("div",ve,[a("div",xe,[a("span",ye,d(f[e.type]),1),a("span",be,d(I(e.createdAt)),1),w(i).isFavorite(e.id)?(o(),n("span",me,"â­")):u("",!0),S(e)?(o(),n("span",ke,"ðŸ–¼ï¸ å›¾ç‰‡")):u("",!0),O(e)?(o(),n("span",fe,"ðŸŽ¬ è§†é¢‘")):u("",!0)]),a("h3",he,d(e.title),1),S(e)?(o(),n("div",we,[a("img",{src:e.params.imageUrl,alt:e.title,class:"max-w-xs max-h-32 rounded-lg cursor-pointer hover:opacity-80 transition-opacity",onClick:s=>V(e.params.imageUrl)},null,8,Ce)])):u("",!0),O(e)?(o(),n("div",$e,[a("video",{src:e.params.videoUrl,class:"max-w-xs max-h-32 rounded-lg",controls:""},null,8,je)])):u("",!0),a("p",Ue,d(e.content.slice(0,200))+d(e.content.length>200?"...":""),1)]),a("div",Le,[a("button",{class:"p-2 rounded-lg hover:bg-gray-100 dark:bg-gray-700 transition-colors",title:w(i).isFavorite(e.id)?"å–æ¶ˆæ”¶è—":"æ”¶è—",onClick:s=>w(i).toggleFavorite(e.id)},d(w(i).isFavorite(e.id)?"â­":"â˜†"),9,ze),a("button",{class:"p-2 rounded-lg hover:bg-gray-100 dark:bg-gray-700 transition-colors",title:"å¤åˆ¶",onClick:s=>_(e.content)}," ðŸ“‹ ",8,Se),a("div",Oe,[t[12]||(t[12]=a("button",{class:"p-2 rounded-lg hover:bg-gray-100 dark:bg-gray-700 transition-colors",title:"å¯¼å‡º"}," ðŸ“¥ ",-1)),a("div",Re,[a("button",{class:"block w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:bg-gray-700",onClick:s=>A(e.id,"txt")}," TXT æ ¼å¼ ",8,Ae),a("button",{class:"block w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:bg-gray-700",onClick:s=>A(e.id,"json")}," JSON æ ¼å¼ ",8,Fe)])]),a("button",{class:"p-2 rounded-lg hover:bg-danger-100 dark:bg-danger-900/30 transition-colors text-danger-500",title:"åˆ é™¤",onClick:s=>H(e.id)}," ðŸ—‘ï¸ ",8,Te)])])]))),128))])):(o(),n("div",De,[t[13]||(t[13]=a("span",{class:"text-6xl"},"ðŸ“­",-1)),a("p",Ve,d(b.value||m.value!=="all"||C.value?"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å†…å®¹":"æš‚æ— åŽ†å²è®°å½•ï¼Œå¿«åŽ»åˆ›ä½œå§ï¼"),1)])),L.value&&$.value?(o(),n("div",{key:2,class:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",onClick:R},[a("div",{class:"relative max-w-[90vw] max-h-[90vh]",onClick:t[7]||(t[7]=Q(()=>{},["stop"]))},[a("img",{src:$.value,alt:"é¢„è§ˆå›¾ç‰‡",class:"max-w-full max-h-[85vh] object-contain rounded-lg"},null,8,Ee),a("button",{class:"absolute top-2 right-2 text-white text-2xl bg-black/50 rounded-full w-10 h-10 flex items-center justify-center hover:bg-black/70",onClick:R}," âœ• ")])])):u("",!0)])]))}}),He=W(Je,[["__scopeId","data-v-24559a89"]]);export{He as default};
