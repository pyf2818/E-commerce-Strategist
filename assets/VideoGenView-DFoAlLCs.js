import{H as J,V as Q,j as H,$ as c,l as t,d as l,a,g as B,x as G,J as K,b as y,D as x,e as $,T as s,A as N,f as C,r as W}from"./index-6PeRYcw-.js";import{Q as X}from"./ModelSelector.vue_vue_type_script_setup_true_lang-BBsFU803.js";import{s as Y}from"./_plugin-vue_export-helper-lGy7RumW.js";const Z={class:"max-w-6xl mx-auto space-y-6"},q={class:"flex items-center justify-between"},F={class:"card"},L={class:"mb-6"},M={class:"mb-6"},O={class:"grid grid-cols-3 sm:grid-cols-6 gap-3"},R=["onClick"],ee={class:"text-2xl"},ae={class:"text-xs mt-1"},re={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6"},te={class:"flex gap-3"},le=["onClick"],se={class:"flex gap-3"},de=["onClick"],oe=["disabled"],ie={key:0,class:"mt-4 p-4 bg-danger-50 dark:bg-danger-900/20 text-danger-600 dark:text-danger-400 rounded-lg"},ne={class:"card"},ce={class:"space-y-4"},ue={class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"},ve={class:"flex flex-wrap gap-2"},ge=["onClick"],pe={key:0,class:"card"},be={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},ye={class:"aspect-video bg-gray-200 dark:bg-gray-700 flex items-center justify-center"},xe=["src"],me={key:1,class:"text-center text-gray-400"},fe={class:"mt-2 text-sm"},ke={class:"p-3"},he={class:"text-sm text-gray-700 dark:text-gray-300 line-clamp-2 mb-2"},we={class:"flex items-center justify-between text-xs text-gray-400"},$e={class:"flex gap-2"},Ce=["onClick"],Ae=["onClick"],Ve=J({__name:"VideoGenView",setup(Ie){const m=Q(),V=H(),u=c(""),v=c("product"),g=c(5),f=c("720p"),h=c(!1),n=c(""),w=[{value:"product",label:"商品展示",icon:"🛍️"},{value:"lifestyle",label:"生活场景",icon:"🏠"},{value:"promotional",label:"促销广告",icon:"📢"},{value:"tutorial",label:"使用教程",icon:"📚"},{value:"story",label:"品牌故事",icon:"📖"},{value:"creative",label:"创意短片",icon:"🎨"}],I=[{value:3,label:"3秒"},{value:5,label:"5秒"},{value:10,label:"10秒"}],U=[{value:"480p",label:"480p"},{value:"720p",label:"720p"},{value:"1080p",label:"1080p"}],j=[{category:"商品展示",prompts:["无线耳机产品展示，旋转展示，科技感背景","护肤品瓶身特写，自然光线，清新风格"]},{category:"生活场景",prompts:["咖啡机使用场景，温馨厨房，晨光氛围","运动鞋街头展示，动感十足，时尚风格"]},{category:"促销广告",prompts:["双11大促，红包雨动画，热情洋溢","新品上市，震撼登场，高级质感"]}],p=c([]),_=async()=>{var o,r;if(!m.isVideoEnabled){n.value="请先在设置页面配置视频生成模型的 API Key";return}if(!u.value.trim()){n.value="请输入视频描述";return}h.value=!0,n.value="";const e=u.value;let d=e;try{if(m.isTextEnabled){const k=await m.getTextService().chat([{role:"user",content:`请将以下商品视频描述优化为英文的 AI 视频生成提示词，要求：
1. 添加专业的视频拍摄关键词（如：cinematic, smooth camera movement, professional lighting）
2. 描述镜头运动和场景转换
3. 风格：${(o=w.find(z=>z.value===v.value))==null?void 0:o.label}
4. 时长：${g.value}秒
5. 控制在 80 词以内，直接输出英文提示词，不要解释

视频描述：${e}`}],"你是一位专业的视频导演和 AI 视频生成提示词专家。只输出优化后的英文提示词。");k.success&&k.content&&(d=k.content)}const i=await m.getVideoService().generateVideo(d);let b="",A="completed";i.success&&i.videoUrl?b=i.videoUrl:(A="failed",n.value=i.error||"视频生成失败，请检查 API 配置");const T={id:`video-${Date.now()}`,prompt:e,style:v.value,duration:g.value,resolution:f.value,videoUrl:b,status:A,createdAt:Date.now()};p.value.unshift(T),b&&V.addContent({type:"short-video",platform:"other",title:e.slice(0,50)+(e.length>50?"...":""),content:`视频链接: ${b}

**描述**: ${e}

**风格**: ${(r=w.find(k=>k.value===v.value))==null?void 0:r.label}
**时长**: ${g.value}秒
**分辨率**: ${f.value}`,params:{prompt:e,optimizedPrompt:d,style:v.value,duration:String(g.value),resolution:f.value,videoUrl:b}}),u.value=""}catch(i){n.value=i instanceof Error?i.message:"视频生成失败"}finally{h.value=!1}},D=o=>{u.value=o},E=async o=>{try{window.open(o,"_blank")}catch{window.open(o,"_blank")}},P=o=>{const r=p.value.findIndex(e=>e.id===o);r>-1&&p.value.splice(r,1)},S=()=>{confirm("确定要清空所有生成历史吗？")&&(p.value=[])};return(o,r)=>(t(),l("div",Z,[a("div",q,[r[1]||(r[1]=a("h2",{class:"text-xl font-bold text-gray-800 dark:text-gray-200"}," AI 视频生成 ",-1)),B(X,{"model-type":"video","show-label":!0,size:"md"})]),a("div",F,[r[6]||(r[6]=a("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-6"}," 视频描述与设置 ",-1)),a("div",L,[r[2]||(r[2]=a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 视频描述 ",-1)),G(a("textarea",{"onUpdate:modelValue":r[0]||(r[0]=e=>u.value=e),rows:"3",placeholder:"描述你想要生成的视频内容，例如：一款无线耳机的产品展示视频，旋转展示产品细节，科技感背景...",class:"input"},null,512),[[K,u.value]])]),a("div",M,[r[3]||(r[3]=a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 视频风格 ",-1)),a("div",O,[(t(),l(y,null,x(w,e=>a("button",{key:e.value,class:$(["p-3 rounded-xl border-2 text-center transition-all",v.value===e.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 text-gray-600 dark:text-gray-400"]),onClick:d=>v.value=e.value},[a("span",ee,s(e.icon),1),a("div",ae,s(e.label),1)],10,R)),64))])]),a("div",re,[a("div",null,[r[4]||(r[4]=a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 视频时长 ",-1)),a("div",te,[(t(),l(y,null,x(I,e=>a("button",{key:e.value,class:$(["flex-1 px-4 py-2 rounded-lg border-2 text-sm transition-all",g.value===e.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 hover:border-gray-300"]),onClick:d=>g.value=e.value},s(e.label),11,le)),64))])]),a("div",null,[r[5]||(r[5]=a("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 视频分辨率 ",-1)),a("div",se,[(t(),l(y,null,x(U,e=>a("button",{key:e.value,class:$(["flex-1 px-4 py-2 rounded-lg border-2 text-sm transition-all",f.value===e.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 hover:border-gray-300"]),onClick:d=>f.value=e.value},s(e.label),11,de)),64))])])]),a("button",{disabled:h.value||!N(m).isVideoEnabled,class:"btn-primary w-full py-3",onClick:_},s(h.value?"🎬 生成中...":"🎬 生成视频"),9,oe),n.value?(t(),l("div",ie,s(n.value),1)):C("",!0)]),a("div",ne,[r[7]||(r[7]=a("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4"}," 示例提示词 ",-1)),a("div",ce,[(t(),l(y,null,x(j,e=>a("div",{key:e.category},[a("h4",ue,s(e.category),1),a("div",ve,[(t(!0),l(y,null,x(e.prompts,(d,i)=>(t(),l("button",{key:i,class:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-gray-700 dark:text-gray-300",onClick:b=>D(d)},s(d),9,ge))),128))])])),64))])]),p.value.length>0?(t(),l("div",pe,[a("div",{class:"flex items-center justify-between mb-4"},[r[8]||(r[8]=a("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200"}," 生成历史 ",-1)),a("button",{class:"text-sm text-danger-500 hover:text-danger-600",onClick:S}," 清空历史 ")]),a("div",be,[(t(!0),l(y,null,x(p.value,e=>(t(),l("div",{key:e.id,class:"group relative rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-800"},[a("div",ye,[e.videoUrl&&e.status==="completed"?(t(),l("video",{key:0,src:e.videoUrl,class:"w-full h-full object-cover",controls:""},null,8,xe)):(t(),l("div",me,[r[9]||(r[9]=a("span",{class:"text-4xl"},"🎬",-1)),a("p",fe,s(e.status==="failed"?"生成失败":"处理中..."),1)]))]),a("div",ke,[a("p",he,s(e.prompt),1),a("div",we,[a("span",null,s(e.duration)+"秒 · "+s(e.resolution),1),a("div",$e,[e.videoUrl?(t(),l("button",{key:0,class:"text-primary-500 hover:text-primary-600",onClick:d=>E(e.videoUrl)}," 下载 ",8,Ce)):C("",!0),a("button",{class:"text-danger-500 hover:text-danger-600",onClick:d=>P(e.id)}," 删除 ",8,Ae)])])])]))),128))])])):C("",!0),r[10]||(r[10]=W('<div class="card bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800" data-v-e60ef9b3><h3 class="text-lg font-semibold text-purple-800 dark:text-purple-300 mb-3" data-v-e60ef9b3> 📖 使用说明 </h3><div class="text-sm text-purple-700 dark:text-purple-400 space-y-2" data-v-e60ef9b3><p data-v-e60ef9b3>1. <strong data-v-e60ef9b3>描述视频</strong>：详细描述你想要生成的视频内容，包括场景、动作、风格</p><p data-v-e60ef9b3>2. <strong data-v-e60ef9b3>选择风格</strong>：根据用途选择合适的视频风格</p><p data-v-e60ef9b3>3. <strong data-v-e60ef9b3>设置参数</strong>：选择视频时长和分辨率</p><p data-v-e60ef9b3>4. <strong data-v-e60ef9b3>生成视频</strong>：AI 会自动优化提示词并生成视频</p></div><div class="mt-4 p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg text-sm text-purple-700 dark:text-purple-400" data-v-e60ef9b3> 💡 <strong data-v-e60ef9b3>提示</strong>：视频生成需要较长时间（通常 30 秒到 2 分钟），请耐心等待。目前支持智谱 CogVideoX 和通义万相视频模型。 </div></div>',1))]))}}),De=Y(Ve,[["__scopeId","data-v-e60ef9b3"]]);export{De as default};
