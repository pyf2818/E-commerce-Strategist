import{d as q,a as Q,o as n,c as r,b as s,v as j,x as G,y as K,F as V,r as D,t as d,C as A,j as u,i as _,k as P,B as v,l as W}from"./index.js";import{_ as Y}from"./_plugin-vue_export-helper.js";const Z={class:"max-w-6xl mx-auto space-y-6"},ee={class:"card"},te={class:"flex flex-wrap items-center gap-4"},se={class:"flex-1 min-w-[200px]"},oe=["value"],le={class:"flex items-center gap-2 cursor-pointer"},ae={class:"flex gap-2"},ne={key:2,class:"relative group"},re={class:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 hidden group-hover:block z-10"},ie={class:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400"},ce={key:0,class:"space-y-4"},de={class:"card py-3"},ue={class:"flex items-center gap-3 cursor-pointer"},ge={class:"flex items-start gap-4"},pe=["checked","onChange"],ve={class:"flex-1 min-w-0"},xe={class:"flex items-center gap-2 mb-2"},ye={class:"px-2 py-0.5 bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 text-xs rounded"},be={class:"text-xs text-gray-500 dark:text-gray-400"},ke={key:0,class:"text-yellow-500"},he={key:1,class:"px-2 py-0.5 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 text-xs rounded"},fe={key:2,class:"px-2 py-0.5 bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 text-xs rounded"},me={class:"font-medium text-gray-800 dark:text-gray-200 mb-2"},_e={key:0,class:"mb-3"},we=["src","alt","onClick"],Ce={key:1,class:"mb-3"},$e=["src"],je={class:"text-sm text-gray-500 dark:text-gray-400 line-clamp-3 whitespace-pre-wrap"},Se={class:"flex flex-col gap-2"},Ue=["title","onClick"],Le=["onClick"],ze={class:"relative group"},Fe={class:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 hidden group-hover:block z-10"},Te=["onClick"],Ve=["onClick"],De=["onClick"],Ae={key:1,class:"card text-center py-12"},Ie={class:"mt-4 text-gray-500 dark:text-gray-400"},Oe=["src"],Re=q({__name:"HistoryView",setup(Be){const i=Q(),b=v(""),k=v("all"),w=v(!1),l=v(new Set),h=v(!1),f={"product-title":"å•†å“æ ‡é¢˜","product-desc":"å•†å“æè¿°","short-video":"çŸ­è§†é¢‘è„šæœ¬","live-script":"ç›´æ’­è¯æœ¯","marketing-copy":"è¥é”€æ–‡æ¡ˆ","customer-service":"å®¢æœè¯æœ¯","social-media":"ç¤¾åª’æ–‡æ¡ˆ"},L=o=>{var t;return!!((t=o.params)!=null&&t.imageUrl)},z=o=>{var t;return!!((t=o.params)!=null&&t.videoUrl)},S=v(!1),C=v(""),I=o=>{C.value=o,S.value=!0},F=()=>{S.value=!1,C.value=""},x=W(()=>{let o=[...i.contents];if(b.value){const t=b.value.toLowerCase();o=o.filter(e=>e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t))}return k.value!=="all"&&(o=o.filter(t=>t.type===k.value)),w.value&&(o=o.filter(t=>i.isFavorite(t.id))),o.sort((t,e)=>e.createdAt-t.createdAt)}),O=()=>{h.value?l.value=new Set(x.value.map(o=>o.id)):l.value=new Set},R=o=>{l.value.has(o)?l.value.delete(o):l.value.add(o),h.value=l.value.size===x.value.length},B=()=>{l.value.size!==0&&confirm(`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${l.value.size} æ¡è®°å½•å—ï¼Ÿ`)&&(l.value.forEach(o=>{i.deleteContent(o)}),l.value=new Set,h.value=!1)},M=()=>{l.value.size!==0&&l.value.forEach(o=>{i.isFavorite(o)||i.toggleFavorite(o)})},U=o=>{if(l.value.size===0)return;const t=x.value.filter(c=>l.value.has(c.id));let e="",a="",g="";if(o==="txt")e=t.map(c=>`ã€${f[c.type]}ã€‘${c.title}
${"=".repeat(40)}
${c.content}
`).join(`

`),a=`ç”µå•†å†›å¸ˆ-å¯¼å‡º-${Date.now()}.txt`,g="text/plain";else if(o==="json")e=JSON.stringify(t,null,2),a=`ç”µå•†å†›å¸ˆ-å¯¼å‡º-${Date.now()}.json`,g="application/json";else{const c=["ç±»åž‹","æ ‡é¢˜","å†…å®¹","å¹³å°","åˆ›å»ºæ—¶é—´"],X=t.map(p=>[f[p.type],p.title,`"${p.content.replace(/"/g,'""')}"`,p.platform,new Date(p.createdAt).toLocaleString()]);e=[c.join(","),...X.map(p=>p.join(","))].join(`
`),a=`ç”µå•†å†›å¸ˆ-å¯¼å‡º-${Date.now()}.csv`,g="text/csv"}const m=new Blob([e],{type:g}),$=URL.createObjectURL(m),y=document.createElement("a");y.href=$,y.download=a,y.click(),URL.revokeObjectURL($)},T=(o,t)=>{const e=i.getContentById(o);if(!e)return;let a="",g="",m="";t==="txt"?(a=`ã€${f[e.type]}ã€‘${e.title}
${"=".repeat(40)}
${e.content}`,g=`${e.title}.txt`,m="text/plain"):(a=JSON.stringify(e,null,2),g=`${e.title}.json`,m="application/json");const $=new Blob([a],{type:m}),y=URL.createObjectURL($),c=document.createElement("a");c.href=y,c.download=g,c.click(),URL.revokeObjectURL(y)},N=async o=>{try{await navigator.clipboard.writeText(o),alert("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch{alert("å¤åˆ¶å¤±è´¥")}},E=o=>{confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ")&&i.deleteContent(o)},J=o=>new Date(o).toLocaleString(),H=()=>{confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰åŽ†å²è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼")&&i.clearAll()};return(o,t)=>(n(),r("div",null,[s("div",Z,[s("div",ee,[s("div",te,[s("div",se,[j(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e),type:"text",placeholder:"æœç´¢æ ‡é¢˜æˆ–å†…å®¹...",class:"input"},null,512),[[G,b.value]])]),j(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>k.value=e),class:"input w-auto"},[t[8]||(t[8]=s("option",{value:"all"}," å…¨éƒ¨ç±»åž‹ ",-1)),(n(),r(V,null,D(f,(e,a)=>s("option",{key:a,value:a},d(e),9,oe)),64))],512),[[K,k.value]]),s("label",le,[j(s("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>w.value=e),type:"checkbox",class:"rounded"},null,512),[[A,w.value]]),t[9]||(t[9]=s("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"åªçœ‹æ”¶è—",-1))]),s("div",ae,[l.value.size>0?(n(),r("button",{key:0,class:"btn bg-danger-500 text-white hover:bg-danger-600 text-sm",onClick:B}," ðŸ—‘ï¸ åˆ é™¤ ("+d(l.value.size)+") ",1)):u("",!0),l.value.size>0?(n(),r("button",{key:1,class:"btn-secondary text-sm",onClick:M}," â­ æ‰¹é‡æ”¶è— ")):u("",!0),l.value.size>0?(n(),r("div",ne,[t[10]||(t[10]=s("button",{class:"btn-secondary text-sm"}," ðŸ“¥ å¯¼å‡º ",-1)),s("div",re,[s("button",{class:"block w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:bg-gray-700",onClick:t[3]||(t[3]=e=>U("txt"))}," TXT æ ¼å¼ "),s("button",{class:"block w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:bg-gray-700",onClick:t[4]||(t[4]=e=>U("json"))}," JSON æ ¼å¼ "),s("button",{class:"block w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:bg-gray-700",onClick:t[5]||(t[5]=e=>U("csv"))}," CSV æ ¼å¼ ")])])):u("",!0)])])]),s("div",ie,[s("span",null,"å…± "+d(x.value.length)+" æ¡è®°å½•",1),_(i).contents.length>0?(n(),r("button",{key:0,class:"text-danger-500 hover:text-danger-600",onClick:H}," æ¸…ç©ºå…¨éƒ¨ ")):u("",!0)]),x.value.length>0?(n(),r("div",ce,[s("div",de,[s("label",ue,[j(s("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>h.value=e),type:"checkbox",class:"rounded",onChange:O},null,544),[[A,h.value]]),t[11]||(t[11]=s("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"å…¨é€‰",-1))])]),(n(!0),r(V,null,D(x.value,e=>(n(),r("div",{key:e.id,class:"card hover:shadow-md transition-shadow"},[s("div",ge,[s("input",{checked:l.value.has(e.id),type:"checkbox",class:"rounded mt-1",onChange:a=>R(e.id)},null,40,pe),s("div",ve,[s("div",xe,[s("span",ye,d(f[e.type]),1),s("span",be,d(J(e.createdAt)),1),_(i).isFavorite(e.id)?(n(),r("span",ke,"â­")):u("",!0),L(e)?(n(),r("span",he,"ðŸ–¼ï¸ å›¾ç‰‡")):u("",!0),z(e)?(n(),r("span",fe,"ðŸŽ¬ è§†é¢‘")):u("",!0)]),s("h3",me,d(e.title),1),L(e)?(n(),r("div",_e,[s("img",{src:e.params.imageUrl,alt:e.title,class:"max-w-xs max-h-32 rounded-lg cursor-pointer hover:opacity-80 transition-opacity",onClick:a=>I(e.params.imageUrl)},null,8,we)])):u("",!0),z(e)?(n(),r("div",Ce,[s("video",{src:e.params.videoUrl,class:"max-w-xs max-h-32 rounded-lg",controls:""},null,8,$e)])):u("",!0),s("p",je,d(e.content.slice(0,200))+d(e.content.length>200?"...":""),1)]),s("div",Se,[s("button",{class:"p-2 rounded-lg hover:bg-gray-100 dark:bg-gray-700 transition-colors",title:_(i).isFavorite(e.id)?"å–æ¶ˆæ”¶è—":"æ”¶è—",onClick:a=>_(i).toggleFavorite(e.id)},d(_(i).isFavorite(e.id)?"â­":"â˜†"),9,Ue),s("button",{class:"p-2 rounded-lg hover:bg-gray-100 dark:bg-gray-700 transition-colors",title:"å¤åˆ¶",onClick:a=>N(e.content)}," ðŸ“‹ ",8,Le),s("div",ze,[t[12]||(t[12]=s("button",{class:"p-2 rounded-lg hover:bg-gray-100 dark:bg-gray-700 transition-colors",title:"å¯¼å‡º"}," ðŸ“¥ ",-1)),s("div",Fe,[s("button",{class:"block w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:bg-gray-700",onClick:a=>T(e.id,"txt")}," TXT æ ¼å¼ ",8,Te),s("button",{class:"block w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:bg-gray-700",onClick:a=>T(e.id,"json")}," JSON æ ¼å¼ ",8,Ve)])]),s("button",{class:"p-2 rounded-lg hover:bg-danger-100 dark:bg-danger-900/30 transition-colors text-danger-500",title:"åˆ é™¤",onClick:a=>E(e.id)}," ðŸ—‘ï¸ ",8,De)])])]))),128))])):(n(),r("div",Ae,[t[13]||(t[13]=s("span",{class:"text-6xl"},"ðŸ“­",-1)),s("p",Ie,d(b.value||k.value!=="all"||w.value?"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å†…å®¹":"æš‚æ— åŽ†å²è®°å½•ï¼Œå¿«åŽ»åˆ›ä½œå§ï¼"),1)])),S.value&&C.value?(n(),r("div",{key:2,class:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",onClick:F},[s("div",{class:"relative max-w-[90vw] max-h-[90vh]",onClick:t[7]||(t[7]=P(()=>{},["stop"]))},[s("img",{src:C.value,alt:"é¢„è§ˆå›¾ç‰‡",class:"max-w-full max-h-[85vh] object-contain rounded-lg"},null,8,Oe),s("button",{class:"absolute top-2 right-2 text-white text-2xl bg-black/50 rounded-full w-10 h-10 flex items-center justify-center hover:bg-black/70",onClick:F}," âœ• ")])])):u("",!0)])]))}}),Ee=Y(Re,[["__scopeId","data-v-24559a89"]]);export{Ee as default};
